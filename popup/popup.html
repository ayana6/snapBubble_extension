<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>SnapBubble</title>
  <link rel="stylesheet" href="popup.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Nunito+Sans:wght@400;600&display=swap" rel="stylesheet" />
</head>
<body>
  <header class="header">
    <img id="logo" src="../SnapBubble-01.png" alt="SnapBubble" class="logo"/>
    <h3 class="title">SnapBubble</h3>
    <span id="status" class="status">Ready</span>
  </header>

  <div class="settings-container">
    <div class="row">
    <label>OCR Language:</label>
    <select id="forceOcrLang">
      <option value="">Auto</option>
      <option value="eng">English</option>
      <option value="jpn">Japanese</option>
      <option value="kor">Korean</option>
      <option value="chs">Chinese (Simplified)</option>
      <option value="cht">Chinese (Traditional)</option>
    </select>
  </div>

  <div class="row">
    <label>Target Language:</label>
    <input id="targetLanguage" type="text" placeholder="en, ar, fr, ..." />
  </div>

  <div class="row">
    <label>OCR Engine:</label>
    <select id="ocrEngine">
      <option value="1">API 1 (Basic)</option>
      <option value="2">API 2 (Advanced)</option>
      <option value="3">API 3 (Legacy)</option>
    </select>
  </div>

  <div class="row">
    <label>
      <input type="checkbox" id="useAiOcr" style="margin-right: 8px;" />
      Use AI for OCR + Translation
    </label>
  </div>

  <div class="row">
    <label>
      <input type="checkbox" id="batchProcessing" style="margin-right: 8px;" />
      Batch Processing
    </label>
    <span style="font-size: 12px; color: #666; margin-left: 8px;">Process multiple images together for better efficiency (AI OCR only)</span>
  </div>

  <div class="row" id="aiModelRow" style="display: none;">
    <label>AI Model:</label>
    <select id="aiModel">
      <option value="gemini-2.5-flash">Gemini 2.5 Flash (10 RPM, 250K TPM)</option>
      <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
      <option value="gpt-4o">GPT-4o</option>
      <option value="gpt-4o-mini">GPT-4o Mini</option>
    </select>
  </div>

  <div class="row">
    <label>OCR API Key:</label>
    <div style="display: flex; gap: 4px; flex: 1;">
      <input id="ocrApiKey" type="password" placeholder="OCR.Space API key" style="flex: 1;" />
      <button id="copyOcrKey" class="btn btn-ghost" title="Copy OCR API Key" style="padding: 6px; min-width: 32px;">ðŸ“‹</button>
    </div>
  </div>

  <div class="row">
    <label>Translation Provider:</label>
    <select id="translateProvider">
      <option value="openai">OpenAI GPT</option>
      <option value="gemini" selected>Gemini 2.5 Flash (10 RPM, 250K TPM)</option>
      <option value="gemini-pro">Gemini Pro</option>
      <option value="gemini-2">Gemini 2</option>
      <option value="deepl">DeepL</option>
    </select>
  </div>

  <div class="row" id="openaiModelRow" style="display: none;">
    <label>OpenAI Model:</label>
    <select id="openaiModel">
      <option value="gpt-4o-mini">GPT-4o Mini</option>
      <option value="gpt-4o">GPT-4o</option>
    </select>
  </div>

  <div class="row">
    <label>Translation API Key:</label>
    <div style="display: flex; gap: 4px; flex: 1;">
      <input id="translateApiKey" type="password" placeholder="API key for translation" style="flex: 1;" />
      <button id="copyTranslateKey" class="btn btn-ghost" title="Copy Translation API Key" style="padding: 6px; min-width: 32px;">ðŸ“‹</button>
    </div>
  </div>

  <div class="row">
    <label>Min Image Size:</label>
    <input id="minWidth" type="text" style="width:60px" /> Ã—
    <input id="minHeight" type="text" style="width:60px" />
  </div>

  <div class="row">
    <label>Font Family:</label>
    <select id="fontFamily">
      <option value="Arial, sans-serif">Arial</option>
      <option value="Helvetica, sans-serif">Helvetica</option>
      <option value="'Times New Roman', serif">Times New Roman</option>
      <option value="Georgia, serif">Georgia</option>
      <option value="'Courier New', monospace">Courier New</option>
      <option value="Verdana, sans-serif">Verdana</option>
      <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
      <option value="Impact, sans-serif">Impact</option>
      <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
      <option value="'Lucida Console', monospace">Lucida Console</option>
    </select>
  </div>

  <div class="row">
    <label>Text Size:</label>
    <select id="textSize">
      <option value="12">12px</option>
      <option value="14">14px</option>
      <option value="16">16px</option>
      <option value="18">18px</option>
      <option value="20">20px</option>
      <option value="22">22px</option>
      <option value="24">24px</option>
      <option value="28">28px</option>
      <option value="32">32px</option>
      <option value="36">36px</option>
    </select>
  </div>
    <div class="note">
      You should see a green debug panel and magenta boxes on images. If the panel says
      "context invalidated", refresh the page and press Start again.
    </div>
  </div>
  <div class="buttons">
    <button id="startBtn" class="btn btn-success">Start</button>
    <button id="rescanBtn" class="btn btn-secondary">Rescan</button>
    <button id="stopBtn" class="btn btn-danger">Stop</button>
    <button id="manualSelectBtn" class="btn btn-info" title="Manually select area to translate (Ctrl+Alt+S)">ðŸ“¸ Select</button>
    <button id="defaultsBtn" class="btn btn-outline" title="Reset all settings to defaults">Reset</button>
  </div>

  <footer class="footer">
    <div class="footer-note" style="flex:1 1 100%;margin-top:4px;color:#111;font:12px/1.5 monospace;text-align:center;">
      <div>made by <strong style="color:#111">willFreed1</strong></div>
      <div style="margin-top:4px;">If you like this project and find it helpful, <a href="https://ko-fi.com/snapbubble" target="_blank" rel="noopener noreferrer">buy me a coffee</a> â˜•</div>
    </div>
    <div class="footer-icons">
      <a class="social x" href="https://x.com/z_yro_X" target="_blank" rel="noopener noreferrer" aria-label="X profile">
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M17.17 2H21L13.44 10.23 22 22h-6.84l-5.33-7.09L3.9 22H0l7.95-9.03L0 2h6.84l5.02 6.66L17.17 2z"/></svg>
      </a>
      <a class="social discord" href="https://discord.gg/vckeW3cXxS" target="_blank" rel="noopener noreferrer" aria-label="Discord server">
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20.317 4.369a19.79 19.79 0 00-4.885-1.515.074.074 0 00-.079.037c-.211.375-.444.864-.608 1.249-1.846-.276-3.68-.276-5.486 0-.164-.398-.408-.874-.62-1.249a.077.077 0 00-.079-.037 19.736 19.736 0 00-4.885 1.515.07.07 0 00-.032.027C2.273 9.04 1.58 13.58 2.046 18.06a.082.082 0 00.031.056c2.052 1.507 4.041 2.422 5.989 3.03a.078.078 0 00.084-.027c.461-.63.873-1.295 1.226-1.994a.077.077 0 00-.041-.106c-.652-.247-1.27-.549-1.861-.892a.077.077 0 01-.007-.128c.125-.094.25-.192.368-.291a.074.074 0 01.077-.011c3.927 1.793 8.18 1.793 12.061 0a.074.074 0 01.078.01c.118.099.243.198.368.292a.077.077 0 01-.006.127c-.592.344-1.21.646-1.861.893a.077.077 0 00-.041.105c.36.699.772 1.364 1.226 1.995a.077.077 0 00.084.027c1.95-.607 3.938-1.522 5.99-3.03a.082.082 0 00.031-.055c.5-5.177-.838-9.673-3.548-13.665a.061.061 0 00-.031-.028zM8.02 15.33c-1.183 0-2.155-1.085-2.155-2.419 0-1.333.956-2.419 2.155-2.419 1.21 0 2.173 1.095 2.155 2.419 0 1.334-.945 2.419-2.155 2.419z"/></svg>
      </a>
    </div>
  </footer>

  <script type="module" src="popup.js"></script>
</body>
</html>